<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.SendInfoDao">
    
	<sql id="sendInfoColumns">
		a.id AS "id",
		a.business_id AS "businessId",
		a.processInstance_id AS "processInstanceId",
		a.originator_userid AS "originatorUserid",
		a.create_date AS "createDate",
		a.title AS "title",
		a.pdf_path AS "pdfPath",
		a.bus_type AS "busType"

	</sql>
	
	<sql id="sequenceUnitJoins">
	</sql>
    
	<select id="getByBusinessId" resultType="com.model.SendInfo">
		SELECT 
			<include refid="sendInfoColumns"/>
		FROM send_info a
		<include refid="sequenceUnitJoins"/>
		WHERE a.business_id = #{businessId} limit 0,1
	</select>

	<select id="get" resultType="com.model.SendInfo">
		SELECT
			<include refid="sendInfoColumns"/>
		FROM send_info a
		<include refid="sequenceUnitJoins"/>
		WHERE a.id = #{id} limit 0,1
	</select>

	<select id="findList" resultType="com.model.SendInfo">
		SELECT 
			<include refid="sendInfoColumns"/>
		FROM send_info a
		<include refid="sequenceUnitJoins"/>
		<where>
			a.del_flag = 0
			<!--<if test="unitWarehId != null and unitWarehId != ''">
				AND a.unit_wareh_id = #{unitWarehId}
			</if>
			<if test="empNo != null and empNo != ''">
				AND a.emp_no = #{empNo}
			</if>-->
		</where>

		ORDER BY a.create_date desc limit 0,20

	</select>





	
	<insert id="insert">
		INSERT INTO send_info(
			id,
			business_id,
			processInstance_id,
			originator_userid,
			create_date,
			title,
			pdf_path,
			bus_type
		) VALUES (
			#{id},
			#{businessId},
			#{processInstanceId},
			#{originatorUserid},
			#{createDate},
			#{title},
			#{pdfPath},
			#{busType}
		)
	</insert>
	
	<update id="update">
		UPDATE send_info SET
			pdf_path = #{pdfPath}
		WHERE id = #{id}
	</update>
	
	<!--<update id="delete">
		UPDATE sequence_unit SET 
			del_flag = #{DEL_FLAG_DELETE}
		WHERE id = #{id}
	</update>-->


</mapper>